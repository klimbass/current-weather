{"version":3,"file":"commonHelpers.js","sources":["../src/js/showTime.js","../src/js/fetchResponseWeather.js","../src/main.js"],"sourcesContent":["const timeCard =\n  \"<div class='time-card'><div class='time'><span class='hours'></span><span id='dots'>_</span><span class='min'></span></div><div class='date'>_</div></div>\";\n\nconst dataShow = document.querySelector('.date-show');\ndataShow.insertAdjacentHTML('afterbegin', timeCard);\n\nconst timeHTML = document.querySelector('.time');\nconst dateHTML = document.querySelector('.date');\nconst dotsElement = document.getElementById('dots');\nconst min = document.querySelector('.min');\nconst hours = document.querySelector('.hours');\n\n\nfunction showTime() {\n  setInterval(() => {\n    const time = new Date();\n\n    const h = time.getHours().toString().padStart(2, '0');\n    const m = time.getMinutes().toString().padStart(2, '0');\n\n    hours.textContent = h;\n    min.textContent = m;\n    const date = new Date().toLocaleString(navigator.language, {\n      dateStyle: 'short',\n    });\n    dateHTML.textContent = date;\n    dotsElement.textContent = dotsElement.textContent === ':' ? ' ' : ':';\n  }, 1000);\n}\nshowTime();\n","export function fetchRespWeather(url,option){\nreturn fetch(url + option)\n      .then(res => {\n        if (!res.ok) {\n          return new Error(`Error: ${res}`);\n        }\n        return res.json();\n      })     \n}","import './js/showTime';\nimport {fetchRespWeather} from './js/fetchResponseWeather'\n\nconst form = document.querySelector('.form');\nconst img = document.querySelector('.image');\nconst title = document.querySelector('.title');\nconst curWeather = document.querySelector('.current-weather');\nconst date = document.querySelector('.date-show span');\nconst btnSubmit = document.querySelector('#btn-submit');\nbtnSubmit.disabled = true;\n\nconst bookMark = document.querySelector('#bookmark')\nconst bookMarkSave = document.querySelector('.save')\nconst localeCityKey = 'City'\n\n\nconst url = 'https://api.openweathermap.org/data/2.5/weather?';\nlet icon;\nconst option = new URLSearchParams({\n  appid: '117bcd5592950f9f701a11f5ab982de0',\n  units: 'metric',\n  q: '',\n});\n\nform.addEventListener('input', event => {\n  if (event.target.value.trim()) {\n    btnSubmit.disabled = false;\n  }\n});\n\nform.addEventListener('submit', handleSubmit);\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  img.textContent = '';\n  option.set('q', event.target.city.value.trim());\n  console.log(option.get('q'));\n  if (option.get('q')) {\n    fetchRespWeather(url, option)\n    .then(data => {\n        title.textContent = data.name + ' ' + data.sys.country;\n        icon = data.weather[0].icon;\n        const iconUrl = `https://openweathermap.org/img/wn/${icon}@2x.png`;\n        img.insertAdjacentHTML(\n          'afterbegin',\n          `<img src=\"${iconUrl}\" width=\"80\" height=\"80\" />`\n        );\n        console.log(data.main.temp_min, data.main.temp_max);\n        let tempMin = Math.round(data.main.temp_min);\n        if (tempMin > 0) {\n          tempMin = `+${tempMin}`;\n        }\n        let tempMax = Math.round(data.main.temp_max);\n        if (tempMax > 0) {\n          tempMax = `+${tempMax}`;\n        }\n        curWeather.textContent = `${tempMin} - ${tempMax}`;\n      })\n      .catch(() => {\n        console.log('Sorry, such city not found!');\n      })\n      .finally(() => form.reset());\n  }\n}\n\nbookMark.addEventListener('click', handleSave)\n\nfunction handleSave() {\n  if (bookMarkSave.classList.contains('invisible')) {\n    if (option.get('q')) {\n    bookMarkSave.classList.remove('invisible')\n      localStorage.setItem(localeCityKey, option.get('q'))\n    }\n  } else {\n  bookMarkSave.classList.add('invisible')   \n    localStorage.removeItem(localeCityKey)\n  }\n}\n\nif (localStorage.getItem(localeCityKey)) {\n  bookMarkSave.classList.remove('invisible')\n  option.set('q', localStorage.getItem(localeCityKey))\n  fetchRespWeather(url, option)\n    .then(data => {\n        title.textContent = data.name + ' ' + data.sys.country;\n        icon = data.weather[0].icon;\n        const iconUrl = `https://openweathermap.org/img/wn/${icon}@2x.png`;\n        img.insertAdjacentHTML(\n          'afterbegin',\n          `<img src=\"${iconUrl}\" width=\"80\" height=\"80\" />`\n        );\n        console.log(data.main.temp_min, data.main.temp_max);\n        let tempMin = Math.round(data.main.temp_min);\n        if (tempMin > 0) {\n          tempMin = `+${tempMin}`;\n        }\n        let tempMax = Math.round(data.main.temp_max);\n        if (tempMax > 0) {\n          tempMax = `+${tempMax}`;\n        }\n        curWeather.textContent = `${tempMin} - ${tempMax}`;\n      })\n      .catch(() => {\n        console.log('Sorry, such city not found!');\n      })\n}"],"names":["timeCard","dataShow","dateHTML","dotsElement","min","hours","showTime","time","h","m","date","fetchRespWeather","url","option","res","form","img","title","curWeather","btnSubmit","bookMark","bookMarkSave","localeCityKey","icon","event","handleSubmit","data","iconUrl","tempMin","tempMax","handleSave"],"mappings":"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"}